


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="" lang="" version="-//W3C//DTD XHTML 1.1//EN" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Project goals &mdash; OGLplus  documentation</title>
  

  

  

    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="../_static/css/pdj.css" type="text/css" />

  

  

  
    <link rel="stylesheet" href="../_static/css/darker.css" type="text/css" />
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="OGLplus  documentation" href="../index.html"/>
        <link rel="up" title="Introduction" href="../intro.html"/>
        <link rel="next" title="Getting the sources" href="sources.html"/>
        <link rel="prev" title="Introduction" href="../intro.html"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="cache-control" content="public" />
    <meta name="robots" content="follow, all" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Add jQuery library -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

  </head>

  <body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> OGLplus </a>
        <div role="search">
	  <form id ="rtd-search-form" class="wy-form"
		action="../search.html" method="get">
	    <input type="text" name="q" placeholder="Search docs" />
	    <input type="hidden" name="check_keywords" value="yes" />
	    <input type="hidden" name="area" value="default" />
	  </form>
	</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	
          
          
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../intro.html">Introduction</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Project goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Getting the sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html">Building and installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../eagine.html">Common utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../eagine/memory.html">Memory utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eagine/valid_if.html">Optionally-valid values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eagine/valtree.html">Value trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../eglplus.html">EGL utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../eglplus/egl_api_wrap.html">EGL API wrappers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../oglplus.html">OpenGL utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../oglplus/gl_api_wrap.html">OpenGL API wrappers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../oalplus.html">OpenAL utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../oalplus/al_api_wrap.html">OpenAL API wrappers</a></li>
</ul>
</li>
</ul>

          
        

      </div>
      &nbsp;
    </nav>
    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" id="barra-mobile" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">Porão do Juca</a>
      </nav>

      <div class="wy-nav-content">
	<div class="fundo-claro">
	</div>
	<div class="fundo-escuro">
	</div>

        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
	    
	    <!-- <ul class="wy-breadcrumbs"> -->
	    <!--   <li><a href="#">Docs</a> &raquo;</li> -->

	    <!--   <li>Features</li> -->
	    <!--   <li class="wy-breadcrumbs-aside"> -->

	    <!-- 	<a href="_sources/index.txt" rel="nofollow"> View page source</a> -->

	    <!--   </li> -->
	    <!-- </ul> -->
	    <!-- <hr/> -->
	  </div>

          <div role="main" class="">

	    <div id="content" class="hfeed entry-container hentry">
  <div class="section" id="project-goals">
<h1>Project goals<a class="headerlink" href="#project-goals" title="Permalink to this headline">¶</a></h1>
<p>OGLplus has been developed with the following goals in mind:</p>
<div class="section" id="type-safety">
<h2>Type safety<a class="headerlink" href="#type-safety" title="Permalink to this headline">¶</a></h2>
<p>OpenGL defines its symbolic constants as plain numbers of the <code class="docutils literal notranslate"><span class="pre">GLenum</span></code> type.
It is pretty easy to to confuse similar-looking constant names like
<code class="docutils literal notranslate"><span class="pre">GL_LINE</span></code> and <code class="docutils literal notranslate"><span class="pre">GL_LINES</span></code> and use them in the wrong place. For example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT</span><span class="p">,</span> <span class="n">GL_LINES</span><span class="p">);</span>
</pre></div>
</div>
<p>The second argument in the call above is wrong; correctly it should have been:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT</span><span class="p">,</span> <span class="n">GL_LINE</span><span class="p">);</span>
</pre></div>
</div>
<p>Such mistakes are made easily, but can be hard to find.</p>
<p>OGLplus defines typed wrappers around GL constants and uses the C++ type system
to check for such mismatches. If a constant is used in a wrong place it results
in a compilation error, instead of a run-time error.</p>
<p>Additionally, OpenGL and OpenAL, etc. identify objects of various kinds
like programs, shaders, textures, buffers, audio sources, etc. by plain integer
values which can again be easily confused:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GLuint</span> <span class="n">shader</span> <span class="o">=</span> <span class="n">glCreateShader</span><span class="p">(</span><span class="n">GL_VERTEX_SHADER</span><span class="p">);</span>
<span class="n">GLuint</span> <span class="n">program</span> <span class="o">=</span> <span class="n">glCreateProgram</span><span class="p">();</span>

<span class="n">glShaderSource</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="p">...);</span>
<span class="n">glCompileShader</span><span class="p">(</span><span class="n">shader</span><span class="p">);</span> <span class="c1">// so far so good...</span>

<span class="hll"><span class="n">glAttachShader</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="n">program</span><span class="p">);</span> <span class="c1">// run-time error (swapped arguments)</span>
</span></pre></div>
</div>
<p>In OGLplus various references to various object kinds are strongly-typed and
mismatching them results in compile-time error:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">gl</span><span class="p">,</span> <span class="n">GL</span><span class="p">]</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">owned_shader_name</span> <span class="n">shader</span><span class="p">;</span>
<span class="n">gl</span><span class="p">.</span><span class="n">create_shader</span><span class="p">(</span><span class="n">GL</span><span class="p">.</span><span class="n">vertex_shader</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">shader</span><span class="p">;</span>
<span class="n">owned_program_name</span><span class="p">;</span>
<span class="n">gl</span><span class="p">.</span><span class="n">create_program</span><span class="p">()</span> <span class="o">&gt;&gt;</span> <span class="n">program</span><span class="p">;</span>

<span class="n">gl</span><span class="p">.</span><span class="n">shader_source</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="p">...);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">compile_shader</span><span class="p">(</span><span class="n">shader</span><span class="p">);</span>

<span class="hll"><span class="n">gl</span><span class="p">.</span><span class="n">attach_shader</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="n">program</span><span class="p">);</span> <span class="c1">// compile error</span>
</span></pre></div>
</div>
</div>
<div class="section" id="no-preprocessor-ifdefs-in-client-code">
<h2>No preprocessor ifdefs in client code<a class="headerlink" href="#no-preprocessor-ifdefs-in-client-code" title="Permalink to this headline">¶</a></h2>
<p>The OpenGL API is heavily versioned and there are many extensions that are
implementation-specific. In such cases users are often checking whether macros
like <code class="docutils literal notranslate"><span class="pre">GL_VERSION_3_0</span></code> or <code class="docutils literal notranslate"><span class="pre">GL_ARB_compatibility</span></code> are defined and use the C++
preprocessor to switch between implementations using new features or extensions
and fallback implementations using an older GL API:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">myFunction</span><span class="p">()</span> <span class="p">{</span>
<span class="hll"><span class="cp">#ifdef GL_VERSION_4_5</span>
</span><span class="c1">// use new features here</span>
<span class="cp">#else</span>
<span class="c1">// use legacy API instead</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This makes the application code ugly and sometimes hard to reason about.</p>
<p>In OGLplus the GL functions, etc. are wrapped in objects that provide additional
functionality besides just calling the wrapped GL operation. For example they
can be converted to boolean value which says whether a function or constant can
be used. This boolean value can be a compile-time constant, so in many cases you
do not pay for the check at run-time and the unused code is completely removed
from the compiled binary. Also you can directly check for the availability
of the function, not for the version:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">myFunction</span><span class="p">(</span><span class="n">texture_name</span> <span class="n">tex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">gl</span><span class="p">,</span> <span class="n">GL</span><span class="p">]</span> <span class="o">=</span> <span class="p">...</span>
<span class="hll">    <span class="k">if</span><span class="p">(</span><span class="n">gl</span><span class="p">.</span><span class="n">texture_sub_image2d</span><span class="p">)</span> <span class="p">{</span>
</span>        <span class="c1">// yay, we can use DSA</span>
        <span class="n">gl</span><span class="p">.</span><span class="n">texture_sub_image</span><span class="p">(</span><span class="n">tex</span><span class="p">,</span> <span class="p">...);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// we have to bind</span>
        <span class="n">gl</span><span class="p">.</span><span class="n">active_texture</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="n">gl</span><span class="p">.</span><span class="n">bind_texture</span><span class="p">(</span><span class="n">GL</span><span class="p">.</span><span class="n">texture_2d</span><span class="p">,</span> <span class="n">tex</span><span class="p">);</span>
        <span class="n">gl</span><span class="p">.</span><span class="n">tex_sub_image2d</span><span class="p">(</span><span class="n">GL</span><span class="p">.</span><span class="n">texture_2d</span><span class="p">,</span> <span class="p">...);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>TODO</p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


	    </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sources.html" class="btn btn-neutral float-right" title="Getting the sources">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../intro.html" class="btn btn-neutral" title="Introduction"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Matus Chochlik.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/jucacrispim/sphinx_pdj_theme">theme</a> provided by <a href="http://poraodojuca.net">Porão do Juca</a>.

</footer>
	</div>
	</div>
	  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
    <script type="text/javascript" src="../_static/jquery.js">

    </script>
    <script type="text/javascript" src="../_static/underscore.js">

    </script>
    <script type="text/javascript" src="../_static/doctools.js">

    </script>

  

   <script type="text/javascript"
           src="../_static/js/theme.js"></script>

   <script type="text/javascript"
           src="../_static/js/pdj.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  </body>
</html>